<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stundenplan</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #f8f8f8;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    #app {
      width: 80%;
      background-color: #fff;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      border-radius: 8px;
    }

    #timetable {
      margin-top: 20px;
    }

    #timetable table,
    #timetable th,
    #timetable td {
      border: 1px solid #ddd;
    }

    #timetable th,
    #timetable td {
      padding: 10px;
      text-align: left;
    }

    #timetable th {
      background-color: #f2f2f2;
    }

    #timetable input {
      width: 100%;
      box-sizing: border-box;
      padding: 8px;
      margin: 4px 0;
    }

    #timetable button {
      margin-top: 10px;
      padding: 8px;
      cursor: pointer;
      background-color: #4caf50;
      color: #fff;
      border: none;
      border-radius: 4px;
      font-size: 16px;
    }

    #timetable button:hover {
      background-color: #45a049;
    }

    #timetable .highlight {
      background-color: #ffc0cb;
    }
  </style>
</head>

<body>

  <div id="app">
    <h2>Stundenplan</h2>
    <div id="timetable"></div>
    <input id="timetableName" placeholder="Schedule Name">
  </div>

  <script>
    const data = {
      days: ['', '', '', '', ''],
      timetable: Array.from({ length: 5 }, () => ({
        time: '',
        cells: Array(5).fill('')
      })),
      timetableName: '',
      searchId: '',
      deletingColumn: null
    };

    function startDeletingColumns() {
      data.deletingColumn = data.days.length - 1; // Start deleting from the last column
      updateTimetable();
    }

    function stopDeletingColumns() {
      data.deletingColumn = null;
      updateTimetable();
    }

    function addRow() {
      data.timetable.push({ time: '', cells: Array(data.days.length - 1).fill('') });
      updateTimetable();
    }

    function addColumn() {
      data.days.push('New Day');
      data.timetable.forEach(row => row.cells.push(''));
      updateTimetable();
    }

    function saveData() {
      const savedData = {
        username: null,
        scheduleId: null,
        timetableName: data.timetableName,
        days: data.days.slice(1), // Exclude 'Time/Day'
        times: data.timetable.map(row => row.time),
        data: data.timetable.map(row => row.cells)
      };
      console.log('Save data:', savedData);
    }

    function loadData() {
      console.log('Load data for ID:', data.searchId);
    }

    function updateTimetable() {
      const timetableDiv = document.getElementById('timetable');
      timetableDiv.innerHTML = ''; // Clear the existing content

      const table = document.createElement('table');
      const thead = document.createElement('thead');
      const tbody = document.createElement('tbody');

      // Header row
      const headerRow = document.createElement('tr');
      const timeDayTh = document.createElement('th');
      timeDayTh.textContent = 'Time/Day';
      headerRow.appendChild(timeDayTh);

      data.days.forEach((day, index) => {
        const th = document.createElement('th');
        const input = document.createElement('input');
        input.value = day;
        input.placeholder = 'Day';
        input.addEventListener('input', (event) => {
          data.days[index] = event.target.value;
        });
        th.appendChild(input);
        headerRow.appendChild(th);
      });

      thead.appendChild(headerRow);

      // Body rows
      data.timetable.forEach((row, rowIndex) => {
        const tr = document.createElement('tr');

        // Time cell
        const timeTd = document.createElement('td');
        const timeInput = document.createElement('input');
        timeInput.value = row.time;
        timeInput.placeholder = 'Time';
        timeInput.addEventListener('input', (event) => {
          data.timetable[rowIndex].time = event.target.value;
        });
        timeTd.appendChild(timeInput);
        tr.appendChild(timeTd);

        // Activity cells
        row.cells.forEach((cell, cellIndex) => {
          const td = document.createElement('td');
          const input = document.createElement('input');
          input.value = cell;
          input.placeholder = 'Activity';
          input.addEventListener('input', (event) => {
            data.timetable[rowIndex].cells[cellIndex] = event.target.value;
          });
          if (data.deletingColumn === cellIndex) {
            td.classList.add('highlight');
          }
          td.appendChild(input);
          tr.appendChild(td);
        });

        tbody.appendChild(tr);
      });

      table.appendChild(thead);
      table.appendChild(tbody);
      timetableDiv.appendChild(table);
    }

    // Create buttons
    const buttonsDiv = document.getElementById('app');
    const addRowButton = document.createElement('button');
    addRowButton.textContent = 'Add Row';
    addRowButton.addEventListener('click', addRow);
    buttonsDiv.appendChild(addRowButton);

    const addColumnButton = document.createElement('button');
    addColumnButton.textContent = 'Add Column';
    addColumnButton.addEventListener('click', addColumn);
    buttonsDiv.appendChild(addColumnButton);

    const deleteColumnButton = document.createElement('button');
    deleteColumnButton.textContent = 'Delete Columns';
    deleteColumnButton.addEventListener('mouseover', startDeletingColumns);
    deleteColumnButton.addEventListener('mouseout', stopDeletingColumns);
    buttonsDiv.appendChild(deleteColumnButton);

    const saveButton = document.createElement('button');
    saveButton.textContent = 'Save';
    saveButton.addEventListener('click', saveData);
    buttonsDiv.appendChild(saveButton);

    const loadButton = document.createElement('button');
    loadButton.textContent = 'Load';
    loadButton.addEventListener('click', loadData);
    buttonsDiv.appendChild(loadButton);

    // Initialize the timetable
    updateTimetable();
  </script>

</body>

</html>
